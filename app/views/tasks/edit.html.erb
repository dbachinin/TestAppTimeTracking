<h1>Editing Task</h1>

<%= simple_form_for([@project,@task]) do |f| %>
  <%= f.error_notification %>
  <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

  <div class="form-inputs">
    <%= f.input :theme %>
    <%= f.input :user_id, collection: User.all.map{|i| [i.name, i.id.as_json.values[0]]}, input_html: { multiple: true } %>
    <%= f.input :task_type, collection: @task_type %>
    <%= f.input :task_priority, collection: @task_priority %>
    <%= f.input :description %>
    <%= f.input :coment %>
    <div class="input-daterange input-group" id="datepicker">
      <%= f.text_field :estimate_time,  class: "input-sm form-control"%>
      <div class="input-group-addon">to</div>
      <%= f.text_field :teken_time,  class: "input-sm form-control"%>
    </div>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %>
<%= link_to 'Show', @task %> |
<%= link_to 'Back', project_tasks_path(@task.project_id) %>

<script >
  var date = new Date();
  var today = new Date(date.getFullYear(), date.getMonth(), date.getDate());
  (function() {
    $(document).on('turbolinks:load', function() {
      return $('#datepicker').datepicker({
        format: 'yyyy-mm-dd',
        todayBtn: true,
        daysOfWeekHighlighted: '0,6',
        todayHighlight: true,
        autoclose: true,
        startDate: today,
        orientation: "auto left"
      });
    });
  }).call(this);
</script>
